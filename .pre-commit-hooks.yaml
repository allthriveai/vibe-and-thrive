# Hook definitions for vibe-and-thrive
# These hooks help catch common issues when coding with AI agents

- id: check-dry-violations-python
  name: Check DRY Violations (Python)
  description: Detect duplicate code blocks, repeated strings, and similar functions in Python
  entry: hooks/check_dry_violations.py
  language: python
  types: [python]
  exclude: |
    (?x)^(
      .*/tests/.*|
      .*_test\.py$|
      .*test_.*\.py$|
      .*/migrations/.*|
      .*/conftest\.py$|
      .*/fixtures/.*
    )$

- id: check-dry-violations-js
  name: Check DRY Violations (JavaScript/TypeScript)
  description: Detect duplicate code blocks, repeated strings, and className patterns in JS/TS
  entry: hooks/check_dry_violations.js
  language: node
  types_or: [javascript, jsx, ts, tsx]
  exclude: |
    (?x)^(
      .*/tests/.*|
      .*\.test\.(ts|tsx|js|jsx)$|
      .*\.spec\.(ts|tsx|js|jsx)$|
      .*/node_modules/.*|
      .*/fixtures/.*
    )$

- id: check-magic-numbers
  name: Check Magic Numbers
  description: Detect hardcoded numbers that should be named constants
  entry: hooks/check_magic_numbers.py
  language: python
  types: [python]
  exclude: |
    (?x)^(
      .*/tests/.*|
      .*/migrations/.*|
      .*/constants\.py$
    )$

- id: check-hardcoded-urls
  name: Check Hardcoded URLs
  description: Detect localhost/127.0.0.1 URLs that should use configuration
  entry: hooks/check_hardcoded_urls.py
  language: python
  types_or: [python, javascript, jsx, ts, tsx]
  exclude: |
    (?x)^(
      .*/tests/.*|
      .*/fixtures/.*|
      .*\.config\.(js|ts)$
    )$

- id: check-docker-platform
  name: Check Docker Platform
  description: Ensure Docker builds specify platform for ARM/x86 compatibility
  entry: hooks/check_docker_platform.py
  language: python
  files: (Dockerfile\.prod|docker-compose.*\.ya?ml|\.sh)$

- id: check-snake-case-ts
  name: Check snake_case in TypeScript
  description: Detect snake_case property names in TypeScript interfaces/types that should be camelCase
  entry: hooks/check_snake_case_ts.js
  language: node
  types_or: [ts, tsx]
  exclude: |
    (?x)^(
      .*/tests/.*|
      .*\.test\.(ts|tsx)$|
      .*\.spec\.(ts|tsx)$|
      .*\.d\.ts$|
      .*/node_modules/.*
    )$

- id: check-debug-statements
  name: Check Debug Statements
  description: Warn about console.log, print(), debugger statements left in code
  entry: hooks/check_debug_statements.py
  language: python
  types_or: [python, javascript, jsx, ts, tsx]
  exclude: |
    (?x)^(
      .*/tests/.*|
      .*\.test\.(ts|tsx|js|jsx|py)$|
      .*\.spec\.(ts|tsx|js|jsx)$
    )$

- id: check-todo-fixme
  name: Check TODO/FIXME
  description: Warn about TODO, FIXME, XXX, HACK comments that should be addressed
  entry: hooks/check_todo_fixme.py
  language: python
  types_or: [python, javascript, jsx, ts, tsx]

- id: check-empty-catch
  name: Check Empty Catch Blocks
  description: Warn about empty catch/except blocks that silently swallow errors
  entry: hooks/check_empty_catch.py
  language: python
  types_or: [python, javascript, jsx, ts, tsx]

- id: check-secrets
  name: Check for Secrets
  description: Block commits containing hardcoded API keys, passwords, and tokens
  entry: hooks/check_secrets.py
  language: python
  types_or: [python, javascript, jsx, ts, tsx, json, yaml, toml]
  exclude: |
    (?x)^(
      .*\.env\.example$|
      .*\.env\.sample$|
      .*package-lock\.json$|
      .*yarn\.lock$|
      .*pnpm-lock\.yaml$
    )$
